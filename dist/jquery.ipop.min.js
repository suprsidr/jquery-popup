/*
 *  jquery-popup - v0.1.0
 *  Popup tool.
 *  
 *
 *  Made by Wayne Patterson
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,c){if(this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.settings.timer){if(!(this.getTime(this.settings.timerStart)<0&&this.getTime(this.settings.timerEnd)>0))return;this.init()}else this.init()}var e="jqueryPopup",f={ipopbk:"ipopbk",ipop:"ipop",closer:"x-closer",html:"",css:"",height:"400px",width:"400px",delay:1e3,page:1,timer:!1,timerStart:"Aug 10, 2015 07:00:00 CDT",timerEnd:"Aug 17, 2015 07:00:00 CDT",ltc:"formSubmitted",stc:"formDismissed",callbacks:{".x-submit":"submit",".x-closer":"dismiss",".x-nothanks":"longTermDismiss",".ipopbk":"dismiss"}};a.extend(d.prototype,{init:function(){if(""===this.settings.html||""===this.settings.css)return void console.log("Need a path to both html and css");var a="https:"!==c.location.protocol,b=this;!a||this.getShortTermCookie()||this.getLongTermCookie()||(this.setStyles(),setTimeout(function(){b.setHtml()},this.settings.delay))},setShortTermCookie:function(){a.cookie(this.settings.stc,"true",{expires:1,path:"/"})},getShortTermCookie:function(){return a.cookie(this.settings.stc)},setLongTermCookie:function(){a.cookie(this.settings.ltc,"true",{expires:365,path:"/"})},getLongTermCookie:function(){return a.cookie(this.settings.ltc)},dismiss:function(b){b.preventDefault(),b.data.setShortTermCookie(),a.each([b.data.ipopbk,b.data.ipop],function(){a(this).fadeOut("fast",function(){a(this).remove()})})},longTermDismiss:function(b){b.preventDefault(),b.data.setLongTermCookie(),a.each([b.data.ipopbk,b.data.ipop],function(){a(this).fadeOut("fast",function(){a(this).remove()})})},submit:function(b){b.preventDefault(),a(b.data.ipop+" form:invalid").length>0?(a(b.data.ipop+" form input:invalid").addClass("invalid"),a(b.data.ipop+" form input:invalid").first().get(0).focus(),console.log("invalid")):(b.data.setLongTermCookie(),console.log("submitting"))},gotoLink:function(a){a.preventDefault(),a.data.setShortTermCookie(),location.href=this.href},setStyles:function(){a("<link/>",{rel:"stylesheet",type:"text/css",href:this.settings.css}).appendTo("head")},setHtml:function(){var b=this;a.get(this.settings.html).then(function(c){var d=a("<div />",{"class":b.settings.ipopbk}),e=a("<a />",{"class":b.settings.closer,html:"&#215;"}),f=a("<div />",{"class":b.settings.ipop}).css({"max-height":b.settings.height,"max-width":b.settings.width}).append(c).append(e);b.ipopbk=d,b.ipop=f,b.closer=e,a(b.element).append(d).append(f),a(f).fadeIn("slow")}).then(function(){a.each(b.settings.callbacks,function(c,d){"function"==typeof d&&a(c).on("click",b,d),"function"==typeof b[d]&&a(c).on("click",b,b[d])})})},getTime:function(a){var b=new Date(a),c=new Date;return Date.parse(b)/1e3-Date.parse(c)/1e3}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document),!function(a){a(jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(arguments.length>1&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});